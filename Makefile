OBJECTS = virus victim victim_stripped example_bind_now example_bind_now_stripped example example_stripped hello hello_stripped

all: virus sstrip victims stripped_victims

virus: virus_code.s
	gcc virus_code.s -nostdlib -o virus

sstrip: virus
	cd ./ELFkickers-3.1a/ && make

victims:
	gcc victim.S -nostdlib -o victim
	gcc victim.S -nostdlib -o victim_stripped
	gcc example.c -Wl,-z,now -o  example_bind_now
	gcc example.c -Wl,-z,now -o  example_bind_now_stripped
	gcc example.c -o  example
	gcc example.c -o  example_stripped
	gcc hello.c -o hello
	gcc hello.c -o hello_stripped

stripped_victims: victims sstrip
	./ELFkickers-3.1a/sstrip/sstrip hello_stripped
	./ELFkickers-3.1a/sstrip/sstrip example_stripped
	./ELFkickers-3.1a/sstrip/sstrip example_bind_now_stripped
	./ELFkickers-3.1a/sstrip/sstrip victim_stripped

clean:
	cd ./ELFkickers-3.1a/ && make clean
	rm -rf $(OBJECTS)
